<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Component Management &mdash; giblets v0.2 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '#',
        VERSION:     '0.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="giblets v0.2 documentation" href="index.html" />
    <link rel="next" title="Plugin Discovery" href="discovery.html" />
    <link rel="prev" title="Interfaces in depth" href="interfaces.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="discovery.html" title="Plugin Discovery"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="interfaces.html" title="Interfaces in depth"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">giblets v0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="component-management">
<h1>Component Management<a class="headerlink" href="#component-management" title="Permalink to this headline">¶</a></h1>
<p>Giblets provides a fairly flexible system for managing which components are enabled in the case that there are more Components available in the environment than should be active in your application or the current context.  If the built-in options are not enough, it&#8217;s cinch to write your own policy.</p>
<p>By default, all discovered Components are enabled and will appear in all relevant ExtensionPoints.</p>
<p>Components can be refined by applying a restriction policy to the ComponentManager via the <tt class="docutils literal"><span class="pre">restrict</span></tt> method.  The ComponentManager will delegate <tt class="docutils literal"><span class="pre">is_component_enabled</span></tt> to the currently set policy.  There are 3 built-in types of policies which can be found in the <tt class="docutils literal"><span class="pre">giblets.policy</span></tt> module.</p>
<div class="section" id="blacklist">
<h2>Blacklist<a class="headerlink" href="#blacklist" title="Permalink to this headline">¶</a></h2>
<p>All Components are enabled except those explicitly blacklisted by this policy.  Use disable_component and enable_component to add and remove items from the blacklist.</p>
</div>
<div class="section" id="whitelist">
<h2>Whitelist<a class="headerlink" href="#whitelist" title="Permalink to this headline">¶</a></h2>
<p>All Components are disabled except those explicitly whitelisted by this policy.  Use enable_component and disable_component to add and remove items from the whitelist.</p>
</div>
<div class="section" id="patterns">
<h2>Patterns<a class="headerlink" href="#patterns" title="Permalink to this headline">¶</a></h2>
<p>Components are enabled or disabled based on the first matching pattern in a list of wildcard patterns.
If no pattern matches, the Component is disabled.</p>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<blockquote>
<p>A <tt class="docutils literal"><span class="pre">Widget</span></tt> <tt class="docutils literal"><span class="pre">Component</span></tt> calls <tt class="docutils literal"><span class="pre">turn</span></tt> on all things that implement <tt class="docutils literal"><span class="pre">ICog</span></tt> when <tt class="docutils literal"><span class="pre">activate</span></tt> is called.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">giblets</span> <span class="kn">import</span> <span class="o">*</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ICog</span><span class="p">(</span><span class="n">ExtensionInterface</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">turn</span><span class="p">():</span>
<span class="gp">... </span>        <span class="sd">&quot;&quot;&quot;perform cog action&quot;&quot;&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Widget</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">cogs</span> <span class="o">=</span> <span class="n">ExtensionPoint</span><span class="p">(</span><span class="n">ICog</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">activate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">cog</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cogs</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">cog</span><span class="o">.</span><span class="n">turn</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">GoodCog</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
<span class="gp">... </span>    <span class="s">&quot;Well made cog&quot;</span>
<span class="gp">... </span>    <span class="n">implements</span><span class="p">(</span><span class="n">ICog</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">turn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">print</span> <span class="s">&#39;clink clink&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">CheapCog</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
<span class="gp">... </span>    <span class="s">&quot;Evil Exception raising cog&quot;</span>
<span class="gp">... </span>    <span class="n">implements</span><span class="p">(</span><span class="n">ICog</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">turn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;CLANG CLANG&#39;</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>Nuts. Our <tt class="docutils literal"><span class="pre">Widget</span></tt> is ready for action, but the <tt class="docutils literal"><span class="pre">CheapCog</span></tt> is messing
everything up.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mgr</span> <span class="o">=</span> <span class="n">ComponentManager</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">widget</span> <span class="o">=</span> <span class="n">Widget</span><span class="p">(</span><span class="n">mgr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">widget</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="nc">Exception</span>: <span class="n-Identifier">CLANG CLANG</span>
</pre></div>
</div>
<p>Let&#8217;s blacklist it, and try again.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">giblets.policy</span> <span class="kn">import</span> <span class="n">Blacklist</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blacklist</span> <span class="o">=</span> <span class="n">Blacklist</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blacklist</span><span class="o">.</span><span class="n">disable_component</span><span class="p">(</span><span class="n">CheapCog</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mgr</span><span class="o">.</span><span class="n">restrict</span><span class="p">(</span><span class="n">blacklist</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">widget</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>
<span class="go">clink clink</span>
</pre></div>
</div>
<p>That&#8217;s what I like to hear.</p>
</blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">Component Management</a><ul>
<li><a class="reference external" href="#blacklist">Blacklist</a></li>
<li><a class="reference external" href="#whitelist">Whitelist</a></li>
<li><a class="reference external" href="#patterns">Patterns</a></li>
<li><a class="reference external" href="#example">Example</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="interfaces.html"
                                  title="previous chapter">Interfaces in depth</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="discovery.html"
                                  title="next chapter">Plugin Discovery</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/management.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="discovery.html" title="Plugin Discovery"
             >next</a> |</li>
        <li class="right" >
          <a href="interfaces.html" title="Interfaces in depth"
             >previous</a> |</li>
        <li><a href="index.html">giblets v0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2010, Luke Tucker.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.5.
    </div>
  </body>
</html>